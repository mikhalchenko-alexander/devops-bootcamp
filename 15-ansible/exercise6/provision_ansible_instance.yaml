- name: Provision Ansible instance
  hosts: localhost
  tasks:
    - name: Create Ansible instance
      amazon.aws.ec2_instance:
        key_name: devops-bootcamp
        instance_type: "{{ instance_type }}"
        image_id: "{{ ami }}"
        wait: yes
        state: running
        region: "{{ region }}"
        vpc_subnet_id: "{{ vpc_subnet_id }}"
        network:
          - assign_public_ip: true
        security_group: "{{ security_group }}"
        name: "ansible-controller"

    - pause:
        seconds: 60
